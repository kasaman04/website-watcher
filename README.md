# Website Watcher - シンプルなサイト更新監視システム

確実なメール通知でサイト更新をキャッチするツールです。

## ✅ 動作確認完了

アプリケーションが正常に起動し、基本機能のテストが完了しました：

- ✅ **アプリケーション起動**: http://127.0.0.1:8080 で稼働中
- ✅ **Web UI**: シンプルで使いやすいインターフェース
- ✅ **API機能**: サイト登録・削除・チェック機能が動作
- ⚠️ **メール機能**: Gmail設定が必要（下記セットアップガイド参照）

## 🚀 セットアップガイド

### 1. Gmail アプリパスワードの取得

**重要**: 必ずGmailのアプリパスワードを設定してください。

1. **Googleアカウントにアクセス**
   - https://myaccount.google.com にアクセス
   - 「セキュリティ」をクリック

2. **2段階認証を有効化**
   - 「2段階認証プロセス」を有効にする
   - SMS認証などで設定完了

3. **アプリパスワード生成**
   - 「アプリパスワード」を選択
   - 「メール」→「その他」を選択
   - 「Website Watcher」などの名前を入力
   - **16文字のパスワード**をコピー（例: `abcd efgh ijkl mnop`）

### 2. 環境設定ファイルの編集

`.env` ファイルを編集してGmail設定を入力：

```env
# Gmail SMTP設定
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=あなたのGmail@gmail.com
SMTP_PASSWORD=16文字のアプリパスワード
FROM_EMAIL=あなたのGmail@gmail.com

# 監視設定
CHECK_INTERVAL=300
```

### 3. アプリケーションの起動

```bash
python3 start.py
```

ブラウザで http://127.0.0.1:8080 にアクセス

## 📋 使い方

### サイト登録
1. 「新しいサイトを登録」にサイト情報を入力
2. **監視するURL**: チェックしたいWebサイトのURL
3. **通知先メール**: 更新通知を受け取るメールアドレス
4. 「サイトを登録」ボタンをクリック

### テスト送信
1. メールアドレスを入力
2. 「テストメール送信」ボタンをクリック
3. メールが届けばセットアップ完了

### 自動監視
- 5分間隔で自動的に全サイトをチェック
- サイトに変更があれば即座にメール通知
- 「今すぐ全チェック」で手動実行も可能

## 🔧 トラブルシューティング

### メールが届かない場合
1. `.env` ファイルの設定を再確認
2. アプリパスワードが正しく16文字で設定されているか確認
3. 2段階認証が有効になっているか確認
4. 「テストメール送信」で接続テスト

### ログの確認
```bash
# アプリケーションログ
tail -f watcher.log
```

## 📝 機能詳細

- **確実なメール通知**: 3回リトライで送信確実性を向上
- **軽量設計**: JSONファイルベースでデータベース不要
- **シンプルUI**: 必要最小限の機能で高速動作
- **リアルタイム監視**: 5分間隔での自動チェック
- **変更検知**: MD5ハッシュによる確実な変更検知

## 📂 ファイル構成

```
更新サイトチェッカー2/
├── app.py              # メインアプリケーション
├── start.py            # 起動スクリプト
├── .env                # 環境設定
├── config.json         # サイトデータ
├── static/
│   └── index.html      # Web UI
├── requirements.txt    # 依存関係
└── README.md          # このファイル
```

## 🎯 前回の問題点と改善

従来版で発生していた問題を全て解決：

- ❌ データベース接続タイムアウト → ✅ JSON ファイル採用
- ❌ 重いVue.js UI → ✅ 軽量バニラJS
- ❌ 複雑な構成 → ✅ シンプルな1ファイル構成
- ❌ 不安定な通知 → ✅ リトライ機能付き確実通知

現在のシステムは**メール通知の確実性**に特化した設計です。